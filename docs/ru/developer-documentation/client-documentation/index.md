# Документация по диспетчеру Lethean

## Платежи
Этот диспетчер не будет ничего оплачивать за вас. Он поможет создать локальную конфигурацию и соединиться с удалённым сервисом. Также он создаст audit.log, в котором будут инструкции по оплате.
Он будет ждать, пока услуга будет оплачена, и каждые 60 секунд проверять, поступила ли оплата.

## Выход из диспетчера
По умолчанию клиент пытается подключиться, и если есть какая-то ошибка, он завершает работу по истечении времени ожидания подключения. Затем он ожидает платежа и, если платеж не поступает, завершает работу по истечении времени ожидания платежа(по таймауту).
Если вы хотите, чтобы клиент постоянно пытался подключиться, используйте большие числа для таймаутов. Имейте в виду, что время ожидания начинается с небольшого числа, но увеличивается на два в каждом цикле, чтобы избежать перегрузки сети.
Вы можете использовать --fork-on-connect для перехода в фоновый режим после успешного подключения. Это можно использовать для цепочки впн (см. ниже). 

## Совместимость
Есть две версии диспетчера - v3 и v4. Мы изменили названия заголовков из-за летеанизации . Если вы хотите приконнектиться к старому (v3) диспетчеру, используйте --compatibility v3.
Клиент не будет подключаться, если уровень совместимости не совпадает!

## Формат URI сервиса
URI службы используются для идентификации служб по провайдерам. Это наша экслюзивная разработка. Есть два типа URI - на основе SDP и на основе FQDN.
На основе SDP данные собираются с центрального сервера SDP, на основе FQDN данные собираются с сервера SDP локального провайдера. 

### Основной URI синтакс

authid@provider/service

 * provider может быть providerid или domain name
 * service может быть serviceid или service name
 * authid можно опустить, он будет автоматически сгенерирован. Не забывайте, что первые два символа authid должны совпадать с идентификатором службы serviceid.

Если провайдер на основе FQDN и не имеет providerid, клиент будет использовать DNS чтобы получить информацию о SDP и провайдере. 

### Расширенный URI синтакс (цепочка впн)

В нашем сервисе можно использовать VPN/Proxy chaining или цепочку ВПН/Proxy. Т.е. вы можете подключиться сразу к нескольким провайдерам и получить большую анонимность по сравнению с обычным ВПН/Proxy.

 * При использовании HTTP прокси: {authid1@provider1/service1}//proxy:port
 * Простая цепочка ВПН из двух провайдеров: Соединение с провайдером2 и использовать его как серверную часть для подключения к service1: {authid1@provider1/service1}//{authid2@provider2/service2}
 * Более сложная цепочка (циклическая): {authid1@provider1/service1}//{authid2@provider2/service2,authid3@provider3/service3}


